(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-870888d2"],{"170c":function(t,e,s){"use strict";s("69d6")},2375:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spin"},[s("div",{staticClass:"lds-roller"},[s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div")])])}],n={},r=n,o=(s("170c"),s("2877")),c=Object(o["a"])(r,i,a,!1,null,"469b7f34",null);e["a"]=c.exports},"27c5":function(t,e,s){},"69d6":function(t,e,s){},b2d0:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user__tweet__container"},[s("div",{staticClass:"user__tweet__main__wrapper"},[t.isLoading?s("Spinner"):[[t.posts?t._l(t.posts,(function(t){return s("UserPost",{key:t.TweetId,attrs:{"initial-tweet":t,"like-num":t.likeCount}})})):s("div",{staticClass:"empty-message"},[t._v(" 目前沒有推文，快去新增推文吧！ ")])]]],2)])},a=[],n=s("1da1"),r=s("5530"),o=(s("96cf"),s("f949")),c=s("4cce"),_=s("c968"),l=s("2f62"),u=s("2375"),p={name:"UserTweets",components:{UserPost:o["a"],Spinner:u["a"]},data:function(){return{posts:[],userId:"",initialUser:[],initialFollowers:[],initialFollowing:!1,isLoading:!0}},computed:Object(r["a"])({},Object(l["b"])(["currentUser"])),beforeRouteUpdate:function(t,e,s){var i=t.params.id;console.log("to",t),this.fetchTweets(i),s()},created:function(){var t=this.$route.params.id;this.userId=t,this.fetchTweets(t)},methods:{fetchTweets:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var i,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isLoading=!0,s.next=4,c["a"].getUserTweets({userId:t});case 4:i=s.sent,a=i.data,e.posts=a,e.isLoading=!1,s.next=15;break;case 10:s.prev=10,s.t0=s["catch"](0),console.log(s.t0),e.isLoading=!1,_["a"].fire({icon:"error",title:"推文資料讀取失敗，請稍後再試"});case 15:case"end":return s.stop()}}),s,null,[[0,10]])})))()}}},d=p,m=(s("e878"),s("2877")),f=Object(m["a"])(d,i,a,!1,null,"1140d95f",null);e["default"]=f.exports},be43:function(t,e,s){"use strict";s("27c5")},e878:function(t,e,s){"use strict";s("ff6e")},f949:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"post__container"},[s("div",{staticClass:"post"},[s("router-link",{attrs:{to:{name:"user-tweets",params:{id:t.post.User.id}}}},[s("div",{staticClass:" post__avatar"},[s("img",{staticClass:"avatar-img",attrs:{src:t._f("emptyImage")(t.post.User.avatar),alt:""}})])]),s("router-link",{attrs:{to:{name:"detail-tweet",params:{id:t.post.TweetId}}}},[s("div",{staticClass:"post__content"},[s("router-link",{attrs:{to:{name:"user-tweets",params:{id:t.post.User.id}}}},[s("div",{staticClass:"post__content__title mb-2"},[s("span",{staticClass:"post__content__title__item user-name"},[t._v(" "+t._s(t.post.User.name)+" ")]),s("span",{staticClass:"post__content__title__item"},[t._v("@"+t._s(t.post.User.account))]),s("span",{staticClass:"post__content__title__item"},[t._v("·")]),s("span",{staticClass:"post__content__title__item post__content__title__item__time"},[t._v(" "+t._s(t._f("fromNow")(t.post.createdAt))+" ")])])]),s("div",{staticClass:"post__content__discription"},[t._v(" "+t._s(t.post.description)+" ")])],1)]),s("div",{staticClass:"post__reaction d-flex "},[s("div",{staticClass:"post__reaction__item message ",on:{click:function(e){t.showModal=!0}}},[s("div",{staticClass:"post__reaction__item__message "}),s("span",{staticClass:"post__reaction__item__text"},[t._v(t._s(t.post.replyCount))])]),s("div",{staticClass:"post__reaction__item "},[t.post.isLike?s("div",{staticClass:"post__reaction__item__container",on:{click:function(e){return t.removeLiked(t.post.TweetId)}}},[s("div",{staticClass:"post__reaction__item__heart--liked"}),s("span",{staticClass:"post__reaction__item__text",class:{liked:t.post.isLike}},[t._v(t._s(t.post.likeCount))])]):s("div",{staticClass:"post__reaction__item__container heart",on:{click:function(e){return t.addLiked(t.post.TweetId)}}},[s("div",{staticClass:"post__reaction__item__heart"}),s("span",{staticClass:"post__reaction__item__text",class:{liked:t.post.isLike}},[t._v(t._s(t.post.likeCount))])])])])],1),t.showModal?[s("ReplyPostModal",{attrs:{"initial-tweet":t.initialTweet},on:{close:function(e){t.showModal=!1},"after-submit":t.handleAfterSubmit}})]:t._e()],2)},a=[],n=s("1da1"),r=s("5530"),o=(s("96cf"),s("b0c0"),s("c968")),c=s("2708"),_=s("cf6a"),l=s("4cce"),u=s("2f62"),p={name:"UserPost",components:{ReplyPostModal:_["default"]},mixins:[c["b"],c["a"]],props:{initialTweet:{type:Object,required:!0}},data:function(){return{showModal:!1,post:this.initialTweet,likeCount:this.initialTweet.likeCount}},computed:Object(r["a"])({},Object(u["b"])(["currentUser"])),watch:{initialTweet:function(t){this.post=Object(r["a"])(Object(r["a"])({},this.post),t)},likeCount:function(t){this.likeCount=this.post.likeCount}},methods:{handleAfterSubmit:function(){this.post.replyCount=this.post.replyCount+1},addLiked:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var i,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l["a"].addLike({tweetId:t});case 3:if(i=s.sent,a=i.data,"success"===a.status){s.next=7;break}throw new Error(a.message);case 7:e.post.TweetId===t&&(e.post=Object(r["a"])(Object(r["a"])({},e.post),{},{isLike:!0,likeCount:e.post.likeCount+1})),e.likeCount+=1,e.$socket.emit("reactionNotify",{id:e.currentUser.id,receiverId:e.post.User.id,avatar:e.currentUser.avatar,name:e.currentUser.name,labelName:"like"}),s.next=16;break;case 12:s.prev=12,s.t0=s["catch"](0),console.log(s.t0),o["a"].fire({icon:"error",title:"喜歡貼文失敗，請稍候再試"});case 16:case"end":return s.stop()}}),s,null,[[0,12]])})))()},removeLiked:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var i,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l["a"].removeLike({tweetId:t});case 3:if(i=s.sent,a=i.data,"success"===a.status){s.next=7;break}throw new Error(a.message);case 7:e.post.TweetId===t&&(e.post=Object(r["a"])(Object(r["a"])({},e.post),{},{isLike:!1,likeCount:e.post.likeCount-1})),e.likeCount-=1,s.next=15;break;case 11:s.prev=11,s.t0=s["catch"](0),console.log(s.t0),o["a"].fire({icon:"error",title:"取消喜歡失敗，請稍候再試"});case 15:case"end":return s.stop()}}),s,null,[[0,11]])})))()}}},d=p,m=(s("be43"),s("2877")),f=Object(m["a"])(d,i,a,!1,null,"61bdd2a2",null);e["a"]=f.exports},ff6e:function(t,e,s){}}]);
//# sourceMappingURL=chunk-870888d2.93f275f7.js.map