{"version":3,"sources":["webpack:///./src/views/UserLikes.vue?4322","webpack:///src/views/UserLikes.vue","webpack:///./src/views/UserLikes.vue?cf24","webpack:///./src/views/UserLikes.vue","webpack:///./src/views/UserLikes.vue?faa3","webpack:///./src/components/Spinner.vue?c969","webpack:///./src/components/Spinner.vue?53aa","webpack:///src/components/Spinner.vue","webpack:///./src/components/Spinner.vue?8682","webpack:///./src/components/Spinner.vue","webpack:///./src/components/UserPost.vue?4db4","webpack:///./src/components/UserPost.vue?3635","webpack:///src/components/UserPost.vue","webpack:///./src/components/UserPost.vue?9362","webpack:///./src/components/UserPost.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","userLikes","_l","post","key","TweetId","attrs","likeCount","_v","staticRenderFns","name","components","UserPost","Spinner","data","userId","initialUser","initialFollowers","initialFollowing","isLoading","computed","beforeRouteUpdate","fetchUserLikes","id","next","created","methods","component","_m","params","User","_f","avatar","_s","account","createdAt","description","on","$event","showModal","replyCount","isLike","removeLiked","class","liked","addLiked","initialTweet","handleAfterSubmit","_e","ReplyPostModal","mixins","props","type","Object","required","watch"],"mappings":"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","file":"js/chunk-4ccf4725.8caca0eb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user__likes__container\"},[_c('div',{staticClass:\"user__likes__main__wrapper\"},[(_vm.isLoading)?_c('Spinner'):[[(!_vm.userLikes)?_c('div',{staticClass:\"empty-message\"},[_vm._v(\" 目前沒有喜歡的推文內容哦，快去按讚吧！ \")]):_vm._l((_vm.userLikes),function(post){return _c('UserPost',{key:post.TweetId,attrs:{\"initial-tweet\":post,\"like-num\":post.likeCount}})})]]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"user__likes__container\">\n    <div class=\"user__likes__main__wrapper\">\n      <Spinner v-if=\"isLoading\" />\n      <template v-else>\n        <template>\n          <div\n            v-if=\"!userLikes\"\n            class=\"empty-message\"\n          >\n            目前沒有喜歡的推文內容哦，快去按讚吧！\n          </div>\n          <template v-else>\n            <UserPost\n              v-for=\"post in userLikes\"\n              :key=\"post.TweetId\"\n              :initial-tweet=\"post\"\n              :like-num=\"post.likeCount\"\n            />\n          </template>\n        </template>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport UserPost from './../components/UserPost.vue'\nimport { Toast } from '../utils/helper'\nimport userAPI from './../apis/users'\nimport { mapState } from 'vuex'\nimport Spinner from './../components/Spinner.vue'\n\nexport default {\n  name: 'UserLikes',\n  components: {\n    UserPost,\n    Spinner\n  },\n  data () {\n    return {\n      userLikes: [],\n      userId: '',\n      initialUser: [],\n      initialFollowers: [],\n      initialFollowing: false,\n      isLoading: true\n    }\n  },\n  computed: {\n    ...mapState(['currentUser'])\n  },\n  beforeRouteUpdate (to, from, next) {\n    const { id } = to.params\n    this.fetchUserLikes(id)\n    next()\n  },\n  created () {\n    const { id } = this.$route.params\n    this.userId = id\n    this.fetchUserLikes(id)\n  },\n  methods: {\n    async fetchUserLikes (userId) {\n      try {\n        this.isLoading = true\n        const { data } = await userAPI.getUserLikes({ userId })\n        this.userLikes = data\n        this.isLoading = false\n        this.isLoading = false\n      } catch (e) {\n        console.log(e)\n        this.isLoading = false\n        Toast.fire({\n          icon: 'error',\n          title: '喜歡的內容讀取失敗，請稍候再試'\n        })\n      }\n    }\n  }\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../assets/scss/main.scss';\n  .user__likes__container {\n    display: flex;\n    justify-content: space-around;\n  }\n  .user__likes__main__wrapper {\n    width: 100%;\n    max-width: 600px;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserLikes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserLikes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserLikes.vue?vue&type=template&id=46e4f137&scoped=true&\"\nimport script from \"./UserLikes.vue?vue&type=script&lang=js&\"\nexport * from \"./UserLikes.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserLikes.vue?vue&type=style&index=0&id=46e4f137&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46e4f137\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserLikes.vue?vue&type=style&index=0&id=46e4f137&lang=scss&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Spinner.vue?vue&type=style&index=0&id=469b7f34&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"spin\"},[_c('div',{staticClass:\"lds-roller\"},[_c('div'),_c('div'),_c('div'),_c('div'),_c('div'),_c('div'),_c('div'),_c('div')])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"spin\">\n    <div class=\"lds-roller\">\n      <div /><div /><div /><div /><div /><div /><div /><div />\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../assets/scss/main.scss';\n.spin {\n  width: 100%;\n  height: 100%;\n}\n.lds-roller {\n  display: inline-block;\n  position: relative;\n  top: 20%;\n  left: 40%;\n  width: 80px;\n  height: 80px;\n}\n.lds-roller div {\n  animation: lds-roller 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  transform-origin: 40px 40px;\n}\n.lds-roller div:after {\n  content: \" \";\n  display: block;\n  position: absolute;\n  width: 7px;\n  height: 7px;\n  border-radius: 50%;\n  background: $orange;\n  margin: -4px 0 0 -4px;\n}\n.lds-roller div:nth-child(1) {\n  animation-delay: -0.036s;\n}\n.lds-roller div:nth-child(1):after {\n  top: 63px;\n  left: 63px;\n}\n.lds-roller div:nth-child(2) {\n  animation-delay: -0.072s;\n}\n.lds-roller div:nth-child(2):after {\n  top: 68px;\n  left: 56px;\n}\n.lds-roller div:nth-child(3) {\n  animation-delay: -0.108s;\n}\n.lds-roller div:nth-child(3):after {\n  top: 71px;\n  left: 48px;\n}\n.lds-roller div:nth-child(4) {\n  animation-delay: -0.144s;\n}\n.lds-roller div:nth-child(4):after {\n  top: 72px;\n  left: 40px;\n}\n.lds-roller div:nth-child(5) {\n  animation-delay: -0.18s;\n}\n.lds-roller div:nth-child(5):after {\n  top: 71px;\n  left: 32px;\n}\n.lds-roller div:nth-child(6) {\n  animation-delay: -0.216s;\n}\n.lds-roller div:nth-child(6):after {\n  top: 68px;\n  left: 24px;\n}\n.lds-roller div:nth-child(7) {\n  animation-delay: -0.252s;\n}\n.lds-roller div:nth-child(7):after {\n  top: 63px;\n  left: 17px;\n}\n.lds-roller div:nth-child(8) {\n  animation-delay: -0.288s;\n}\n.lds-roller div:nth-child(8):after {\n  top: 56px;\n  left: 12px;\n}\n@keyframes lds-roller {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Spinner.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Spinner.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Spinner.vue?vue&type=template&id=469b7f34&scoped=true&\"\nimport script from \"./Spinner.vue?vue&type=script&lang=js&\"\nexport * from \"./Spinner.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Spinner.vue?vue&type=style&index=0&id=469b7f34&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"469b7f34\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPost.vue?vue&type=style&index=0&id=61bdd2a2&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"post__container\"},[_c('div',{staticClass:\"post\"},[_c('router-link',{attrs:{\"to\":{name:'user-tweets', params:{id: _vm.post.User.id}}}},[_c('div',{staticClass:\" post__avatar\"},[_c('img',{staticClass:\"avatar-img\",attrs:{\"src\":_vm._f(\"emptyImage\")(_vm.post.User.avatar),\"alt\":\"\"}})])]),_c('router-link',{attrs:{\"to\":{name:'detail-tweet', params:{id: _vm.post.TweetId}}}},[_c('div',{staticClass:\"post__content\"},[_c('router-link',{attrs:{\"to\":{name:'user-tweets', params:{id: _vm.post.User.id}}}},[_c('div',{staticClass:\"post__content__title mb-2\"},[_c('span',{staticClass:\"post__content__title__item user-name\"},[_vm._v(\" \"+_vm._s(_vm.post.User.name)+\" \")]),_c('span',{staticClass:\"post__content__title__item\"},[_vm._v(\"@\"+_vm._s(_vm.post.User.account))]),_c('span',{staticClass:\"post__content__title__item\"},[_vm._v(\"·\")]),_c('span',{staticClass:\"post__content__title__item post__content__title__item__time\"},[_vm._v(\" \"+_vm._s(_vm._f(\"fromNow\")(_vm.post.createdAt))+\" \")])])]),_c('div',{staticClass:\"post__content__discription\"},[_vm._v(\" \"+_vm._s(_vm.post.description)+\" \")])],1)]),_c('div',{staticClass:\"post__reaction d-flex \"},[_c('div',{staticClass:\"post__reaction__item message \",on:{\"click\":function($event){_vm.showModal = true}}},[_c('div',{staticClass:\"post__reaction__item__message \"}),_c('span',{staticClass:\"post__reaction__item__text\"},[_vm._v(_vm._s(_vm.post.replyCount))])]),_c('div',{staticClass:\"post__reaction__item \"},[(!_vm.post.isLike)?_c('div',{staticClass:\"post__reaction__item__container heart\",on:{\"click\":function($event){return _vm.addLiked(_vm.post.TweetId)}}},[_c('div',{staticClass:\"post__reaction__item__heart\"}),_c('span',{staticClass:\"post__reaction__item__text\",class:{liked:_vm.post.isLike}},[_vm._v(_vm._s(_vm.post.likeCount))])]):_c('div',{staticClass:\"post__reaction__item__container\",on:{\"click\":function($event){return _vm.removeLiked(_vm.post.TweetId)}}},[_c('div',{staticClass:\"post__reaction__item__heart--liked\"}),_c('span',{staticClass:\"post__reaction__item__text\",class:{liked:_vm.post.isLike}},[_vm._v(_vm._s(_vm.post.likeCount))])])])])],1),(_vm.showModal)?[_c('ReplyPostModal',{attrs:{\"initial-tweet\":_vm.initialTweet},on:{\"close\":function($event){_vm.showModal = false},\"after-submit\":_vm.handleAfterSubmit}})]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"post__container\">\n    <!-- 切換選單 -->\n    <div class=\"post\">\n      <router-link :to=\"{name:'user-tweets', params:{id: post.User.id}}\">\n        <div class=\" post__avatar\">\n          <img\n            class=\"avatar-img\"\n            :src=\"post.User.avatar | emptyImage\"\n            alt=\"\"\n          >\n        </div>\n      </router-link>\n      <router-link :to=\"{name:'detail-tweet', params:{id: post.TweetId}}\">\n        <div class=\"post__content\">\n          <router-link :to=\"{name:'user-tweets', params:{id: post.User.id}}\">\n            <div class=\"post__content__title mb-2\">\n              <span class=\"post__content__title__item user-name\">\n                {{ post.User.name }}\n              </span>\n              <span class=\"post__content__title__item\">@{{ post.User.account }}</span>\n              <span class=\"post__content__title__item\">·</span>\n              <span class=\"post__content__title__item post__content__title__item__time\">\n                {{ post.createdAt | fromNow }}\n              </span>\n            </div>\n          </router-link>\n          <div class=\"post__content__discription\">\n            {{ post.description }}\n          </div>\n        </div>\n      </router-link>\n      <div class=\"post__reaction d-flex \">\n        <div\n          class=\"post__reaction__item message \"\n          @click=\"showModal = true\"\n        >\n          <div class=\"post__reaction__item__message \" />\n          <span class=\"post__reaction__item__text\">{{ post.replyCount }}</span>\n        </div>\n        <div class=\"post__reaction__item \">\n          <div\n            v-if=\"!post.isLike\"\n            class=\"post__reaction__item__container heart\"\n            @click=\"addLiked(post.TweetId)\"\n          >\n            <div\n              class=\"post__reaction__item__heart\"\n            />\n            <span\n              class=\"post__reaction__item__text\"\n              :class=\"{liked:post.isLike}\"\n            >{{ post.likeCount }}</span>\n          </div>\n          <div\n            v-else\n            class=\"post__reaction__item__container\"\n            @click=\"removeLiked(post.TweetId)\"\n          >\n            <div\n              class=\"post__reaction__item__heart--liked\"\n            />\n\n            <span\n              class=\"post__reaction__item__text\"\n              :class=\"{liked:post.isLike}\"\n            >{{ post.likeCount }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <template\n      v-if=\"showModal\"\n    >\n      <ReplyPostModal\n        :initial-tweet=\"initialTweet\"\n        @close=\"showModal = false\"\n        @after-submit=\"handleAfterSubmit\"\n      />\n    </template>\n  </div>\n</template>\n<script>\nimport { Toast } from '../utils/helper'\nimport { fromNowFilter, emptyImageFilter } from './../utils/mixins'\nimport ReplyPostModal from './../components/ReplyPostModal.vue'\nimport userAPI from './../apis/users'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'UserPost',\n  components: {\n    ReplyPostModal\n  },\n  mixins: [fromNowFilter, emptyImageFilter],\n  props: {\n    initialTweet: {\n      type: Object,\n      required: true\n    }\n  },\n\n  data () {\n    return {\n      showModal: false,\n      post: this.initialTweet,\n      likeCount: this.initialTweet.likeCount\n    }\n  },\n  computed: {\n    ...mapState(['currentUser'])\n\n  },\n  watch: {\n    initialTweet (newValue) {\n      this.post = {\n        ...this.post,\n        ...newValue\n      }\n    },\n    likeCount (newValue) {\n      this.likeCount = this.post.likeCount\n    }\n  },\n  methods: {\n    handleAfterSubmit () {\n      this.post.replyCount = this.post.replyCount + 1\n    },\n    async addLiked (tweetId) {\n      try {\n        const { data } = await userAPI.addLike({ tweetId })\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        if (this.post.TweetId === tweetId) {\n          this.post = {\n            ...this.post,\n            isLike: true,\n            likeCount: this.post.likeCount + 1\n          }\n        }\n        this.likeCount += 1\n        // socket event\n        this.$socket.emit('reactionNotify', {\n          id: this.currentUser.id,\n          receiverId: this.post.User.id,\n          avatar: this.currentUser.avatar,\n          name: this.currentUser.name,\n          labelName: 'like'\n        })\n      } catch (e) {\n        console.log(e)\n        Toast.fire({\n          icon: 'error',\n          title: '喜歡貼文失敗，請稍候再試'\n        })\n      }\n    },\n    async removeLiked (tweetId) {\n      try {\n        const { data } = await userAPI.removeLike({ tweetId })\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n        if (this.post.TweetId === tweetId) {\n          this.post = {\n            ...this.post,\n            isLike: false,\n            likeCount: this.post.likeCount - 1\n          }\n        }\n        this.likeCount -= 1\n      } catch (e) {\n        console.log(e)\n        Toast.fire({\n          icon: 'error',\n          title: '取消喜歡失敗，請稍候再試'\n        })\n      }\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n@import '../assets/scss/main.scss';\na{\n  text-decoration: none;\n  cursor: pointer;\n  color: $tx-gray;\n}\n.liked{\n  color: $heart-pink;\n  }\n.post__container{\n  width: 600px;\n}\n.post__item__wrapper {\n  display: flex;\n  width: 390px;\n  justify-content: space-around;\n  text-decoration: none;\n  .post__item {\n    text-decoration: none;\n    width: 130px;\n    text-align: center;\n    &:hover {\n      border-bottom: 1px solid $orange;\n    }\n    .post__item__button {\n      color: $tx-gray;\n      text-decoration: none;\n      padding: 16px 0 16px 0;\n      font-weight: 700;\n      &:hover {\n        color: $orange;\n      }\n    }\n  }\n}\n\n.post {\n  display: grid;\n  grid-template-columns: 50px 1fr;\n  grid-row-gap: 12px;\n  max-width: 600px;\n  border-bottom: 1px solid $light-gray;\n  margin-top: -1px;\n  padding: 15px;\n  &.noborder{\n    border: 0px;\n  }\n  &__content {\n    margin-left: 10px;\n    cursor: pointer;\n    &__title {\n      color: $tx-gray;\n      &__item {\n        cursor: pointer;\n        &:nth-child(2){\n          margin-right: 3px;\n        }\n        &__time {\n          font-size: 14px;\n          margin-left: -1px;\n        }\n      }\n    }\n    &__discription {\n      line-height: 20px;\n      width: 100%;\n      word-break: break-all;\n      @include text-style(15px, normal, $black,pointer);\n    }\n\n  }\n  &__reaction {\n      grid-column: 2/3;\n      grid-row: 2/3;\n      margin-left: 10px;\n      color: $tx-gray;\n      height: 20px;\n      display: flex;\n      align-items: center;\n      .heart{\n        position: relative;\n        &::before{\n          position: absolute;\n          top: -1px;\n          left: -2px;\n          content: '';\n          width: 22px;\n          height: 22px;\n          border-radius: 50%;\n          background:  $heart-pink;\n          opacity: 0;\n        }\n      }\n      .message{\n        position: relative;\n        &::before{\n          position: absolute;\n          top: -1px;\n          left: -2px;\n          content: '';\n          width: 22px;\n          height: 22px;\n          border-radius: 50%;\n          background:  $light-blue;\n          opacity: 0;\n        }\n      }\n      .message:hover {\n          color: $light-blue;\n          &::before{\n          opacity: 0.2;\n          transition: opacity 0.2s ease-in ;\n        }\n          div{\n            background: $light-blue;\n          }\n      }\n      .heart:hover{\n        color: $heart-pink;\n        position: relative;\n\n        &::before{\n          opacity: 0.2;\n          transition: opacity 0.2s ease-in ;\n        }\n        div{\n          background: $heart-pink;\n        }\n      }\n      &__item {\n        cursor: pointer;\n        margin-right: 50px;\n        display: flex;\n        align-items: center;\n        width: 47px;\n        &__container{\n          width: 100%;\n          display: flex;\n          align-items: center;\n        }\n        &__text {\n          font-size: 14px;\n          line-height: 14px;\n          margin-left: 12px;\n          line-height: 20px;\n        }\n        &__message,&__heart, &__heart--liked{\n          width: 18px;\n          height: 18px;\n          @extend %icon-style;\n        }\n        &__message{\n          mask-image: url('./../assets/icon/icon_message.svg');\n          -webkit-mask-image:url('./../assets/icon/icon_message.svg');\n          background: $tx-gray;\n        }\n        &__heart{\n          mask-image: url('./../assets/icon/icon_like.svg');\n          -webkit-mask-image:url('./../assets/icon/icon_like.svg');\n          background: $tx-gray;\n\n          &--liked{\n            mask-image: url('./../assets/icon/icon_isliked.svg');\n            -webkit-mask-image:url('./../assets/icon/icon_isliked.svg');\n            background-color: $heart-pink;\n            width: 18px;\n            height: 18px;\n          }\n        }\n      }\n    }\n}\n@media screen and (max-width: 768px) {\n  .post__container{\n    width: 100%;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPost.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPost.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserPost.vue?vue&type=template&id=61bdd2a2&scoped=true&\"\nimport script from \"./UserPost.vue?vue&type=script&lang=js&\"\nexport * from \"./UserPost.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UserPost.vue?vue&type=style&index=0&id=61bdd2a2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61bdd2a2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}