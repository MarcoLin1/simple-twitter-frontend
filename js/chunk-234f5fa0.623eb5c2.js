(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-234f5fa0"],{"0f15":function(t,e,s){"use strict";s("7609")},"25f0":function(t,e,s){"use strict";var n=s("6eeb"),a=s("825a"),r=s("d039"),i=s("ad6d"),c="toString",_=RegExp.prototype,o=_[c],u=r((function(){return"/a/b"!=o.call({source:"a",flags:"b"})})),l=o.name!=c;(u||l)&&n(RegExp.prototype,c,(function(){var t=a(this),e=String(t.source),s=t.flags,n=String(void 0===s&&t instanceof RegExp&&!("flags"in _)?i.call(t):s);return"/"+e+"/"+n}),{unsafe:!0})},7609:function(t,e,s){},ad6d:function(t,e,s){"use strict";var n=s("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},fa6a:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isLoading?s("Spinner",{staticClass:"mt-5"}):[s("TopNavbar",{attrs:{"current-page":t.currentPage}}),s("div",{staticClass:"admin__tweets__list__container"},["/admin"!==t.$route.path.slice(0,5)?s("div",{staticClass:"admin__tweets__list__main__wrapper"},t._l(t.tweets,(function(e){return s("div",{key:e.TweetId,staticClass:"admin__tweets__list__body__wrapper"},[s("div",{staticClass:"admin__tweets__list__image__wrapper"},[s("img",{staticClass:"admin__tweets__list__image",attrs:{src:t._f("emptyImage")(e.User.avatar),alt:""}})]),s("div",{staticClass:"admin__tweets__list__content__wrapper"},[s("div",{staticClass:"admin__tweets__list__name__wrapper"},[s("div",{staticClass:"admin__tweets__list__name"},[t._v(" "+t._s(e.User.name)+" ")]),s("div",{staticClass:"admin__tweets__list__account"},[t._v(" @ "+t._s(e.User.account)+" · ")]),s("div",{staticClass:"admin__tweets__list__time"},[t._v(" "+t._s(t._f("shortenTime")(e.createdAt))+" ")])]),s("div",{staticClass:"admin__tweets__list__wrapper"},[t._v(" "+t._s(e.description)+" ")]),s("div",{staticClass:"admin__tweets__list__icon__wrapper"},[s("button",{staticClass:"admin__tweets__list__icon",attrs:{disabled:t.isProcessing,"aria-hidden":"true"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteTweet(e.TweetId)}}},[t._v(" × ")])])])])})),0):t._e()])]],2)},a=[],r=s("1da1"),i=(s("d3b7"),s("25f0"),s("4de4"),s("96cf"),s("be6c")),c=s("2708"),_=s("c968"),o=s("3d20"),u=s.n(o),l=s("6c83"),d=s("2375"),f={name:"AdminTweetsList",components:{TopNavbar:l["a"],Spinner:d["a"]},mixins:[c["e"],c["a"]],data:function(){return{isLoading:!0,isProcessing:!1,tweets:[],user:[],currentPage:"推文清單"}},created:function(){this.fetchTweets()},methods:{fetchTweets:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["a"].tweet.get();case 3:s=e.sent,n=s.data,t.tweets=n,t.isLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log("error",e.t0),_["a"].fire({icon:"error",title:"目前無法讀取推文，請稍後再試"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},deleteTweet:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function s(){var n,a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,e.isProcessing=!0,s.next=4,u.a.fire({title:"確定要刪除該則推文嗎？",text:"刪除後將無法復原！",icon:"warning",showCancelButton:!0,cancelButtonColor:"#657786",confirmButtonColor:"#ff6600",confirmButtonText:"確定刪除",cancelButtonText:"取消"});case 4:if(n=s.sent,!n.isConfirmed){s.next=17;break}return s.next=8,i["a"].tweet.delete({tweetId:t.toString()});case 8:if(a=s.sent,r=a.data,"success"===r.status){s.next=12;break}throw new Error(r.message);case 12:e.tweets=e.tweets.filter((function(e){return e.TweetId!==t})),u.a.fire("刪除成功!","該則貼文已刪除","success"),e.isProcessing=!1,s.next=19;break;case 17:return e.isProcessing=!1,s.abrupt("return");case 19:s.next=26;break;case 21:s.prev=21,s.t0=s["catch"](0),e.isProcessing=!1,console.log("error",s.t0),_["a"].fire({icon:"error",title:"目前無法刪除該推文，請稍後再試"});case 26:case"end":return s.stop()}}),s,null,[[0,21]])})))()}}},w=f,p=(s("0f15"),s("2877")),m=Object(p["a"])(w,n,a,!1,null,"8032cfc2",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-234f5fa0.623eb5c2.js.map