{"version":3,"sources":["webpack:///./src/views/AdminTweets.vue?16b8","webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./node_modules/core-js/internals/regexp-flags.js","webpack:///./src/views/AdminTweets.vue?ce14","webpack:///src/views/AdminTweets.vue","webpack:///./src/views/AdminTweets.vue?3126","webpack:///./src/views/AdminTweets.vue"],"names":["redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","prototype","nativeToString","NOT_GENERIC","call","source","INCORRECT_NAME","name","R","this","p","String","rf","f","undefined","unsafe","module","exports","that","result","global","ignoreCase","multiline","dotAll","unicode","sticky","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","currentPage","$route","path","slice","_l","tweet","key","TweetId","_f","User","avatar","_v","_s","account","createdAt","description","isProcessing","on","$event","stopPropagation","preventDefault","deleteTweet","_e","staticRenderFns","components","TopNavbar","Spinner","mixins","data","isLoading","tweets","user","created","fetchTweets","methods","component"],"mappings":"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","file":"js/chunk-234f5fa0.623eb5c2.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweets.vue?vue&type=style&index=0&id=8032cfc2&lang=scss&scoped=true&\"","'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.isLoading)?_c('Spinner',{staticClass:\"mt-5\"}):[_c('TopNavbar',{attrs:{\"current-page\":_vm.currentPage}}),_c('div',{staticClass:\"admin__tweets__list__container\"},[(_vm.$route.path.slice(0, 5) !== '/admin')?_c('div',{staticClass:\"admin__tweets__list__main__wrapper\"},_vm._l((_vm.tweets),function(tweet){return _c('div',{key:tweet.TweetId,staticClass:\"admin__tweets__list__body__wrapper\"},[_c('div',{staticClass:\"admin__tweets__list__image__wrapper\"},[_c('img',{staticClass:\"admin__tweets__list__image\",attrs:{\"src\":_vm._f(\"emptyImage\")(tweet.User.avatar),\"alt\":\"\"}})]),_c('div',{staticClass:\"admin__tweets__list__content__wrapper\"},[_c('div',{staticClass:\"admin__tweets__list__name__wrapper\"},[_c('div',{staticClass:\"admin__tweets__list__name\"},[_vm._v(\" \"+_vm._s(tweet.User.name)+\" \")]),_c('div',{staticClass:\"admin__tweets__list__account\"},[_vm._v(\" @ \"+_vm._s(tweet.User.account)+\" · \")]),_c('div',{staticClass:\"admin__tweets__list__time\"},[_vm._v(\" \"+_vm._s(_vm._f(\"shortenTime\")(tweet.createdAt))+\" \")])]),_c('div',{staticClass:\"admin__tweets__list__wrapper\"},[_vm._v(\" \"+_vm._s(tweet.description)+\" \")]),_c('div',{staticClass:\"admin__tweets__list__icon__wrapper\"},[_c('button',{staticClass:\"admin__tweets__list__icon\",attrs:{\"disabled\":_vm.isProcessing,\"aria-hidden\":\"true\"},on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.deleteTweet(tweet.TweetId)}}},[_vm._v(\" × \")])])])])}),0):_vm._e()])]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Spinner\n      v-if=\"isLoading\"\n      class=\"mt-5\"\n    />\n    <template v-else>\n      <TopNavbar :current-page=\"currentPage\" />\n      <div class=\"admin__tweets__list__container\">\n        <div\n          v-if=\"$route.path.slice(0, 5) !== '/admin'\"\n          class=\"admin__tweets__list__main__wrapper\"\n        >\n          <div\n            v-for=\"tweet in tweets\"\n            :key=\"tweet.TweetId\"\n            class=\"admin__tweets__list__body__wrapper\"\n          >\n            <div class=\"admin__tweets__list__image__wrapper\">\n              <img\n                :src=\"tweet.User.avatar | emptyImage\"\n                alt=\"\"\n                class=\"admin__tweets__list__image\"\n              >\n            </div>\n            <div class=\"admin__tweets__list__content__wrapper\">\n              <div class=\"admin__tweets__list__name__wrapper\">\n                <div class=\"admin__tweets__list__name\">\n                  {{ tweet.User.name }}\n                </div>\n                <div class=\"admin__tweets__list__account\">\n                  @ {{ tweet.User.account }} ·\n                </div>\n                <div class=\"admin__tweets__list__time\">\n                  {{ tweet.createdAt | shortenTime }}\n                </div>\n              </div>\n              <div class=\"admin__tweets__list__wrapper\">\n                {{ tweet.description }}\n              </div>\n              <div class=\"admin__tweets__list__icon__wrapper\">\n                <button\n                  :disabled=\"isProcessing\"\n                  class=\"admin__tweets__list__icon\"\n                  aria-hidden=\"true\"\n                  @click.stop.prevent=\"deleteTweet(tweet.TweetId)\"\n                >\n                  &times;\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport adminAPI from './../apis/admin'\nimport { shortenTimeFilter, emptyImageFilter } from './../utils/mixins'\nimport { Toast } from '../utils/helper'\nimport Swal from 'sweetalert2'\nimport TopNavbar from './../components/TopNavbar.vue'\nimport Spinner from './../components/Spinner.vue'\n\nexport default {\n  name: 'AdminTweetsList',\n  components: {\n    TopNavbar,\n    Spinner\n  },\n  mixins: [shortenTimeFilter, emptyImageFilter],\n  data () {\n    return {\n      isLoading: true,\n      isProcessing: false,\n      tweets: [],\n      user: [],\n      currentPage: '推文清單'\n    }\n  },\n  created () {\n    this.fetchTweets()\n  },\n  methods: {\n    async fetchTweets () {\n      try {\n        const { data } = await adminAPI.tweet.get()\n        this.tweets = data\n        this.isLoading = false\n      } catch (error) {\n        console.log('error', error)\n        Toast.fire({\n          icon: 'error',\n          title: '目前無法讀取推文，請稍後再試'\n        })\n      }\n    },\n    async deleteTweet (tweetId) {\n      try {\n        this.isProcessing = true\n        // 跳出sweet alert 確認使用者是否要刪除\n        const result = await Swal.fire({\n          title: '確定要刪除該則推文嗎？',\n          text: '刪除後將無法復原！',\n          icon: 'warning',\n          showCancelButton: true,\n          cancelButtonColor: '#657786',\n          confirmButtonColor: '#ff6600',\n          confirmButtonText: '確定刪除',\n          cancelButtonText: '取消'\n        })\n        // 如果要刪除，則會串刪除的API\n        if (result.isConfirmed) {\n          const { data } = await adminAPI.tweet.delete({ tweetId: tweetId.toString() })\n          if (data.status !== 'success') {\n            throw new Error(data.message)\n          }\n          // 確認沒問題後才會更新tweets列表及跳出刪除成功提醒\n          this.tweets = this.tweets.filter(tweet => tweet.TweetId !== tweetId)\n          Swal.fire(\n            '刪除成功!',\n            '該則貼文已刪除',\n            'success'\n          )\n          this.isProcessing = false\n        } else {\n          this.isProcessing = false\n          return\n        }\n      } catch (error) {\n        this.isProcessing = false\n        console.log('error', error)\n        Toast.fire({\n          icon: 'error',\n          title: '目前無法刪除該推文，請稍後再試'\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../assets/scss/main.scss';\n  .admin__tweets__list__container {\n    display: flex;\n    height: 100vh;\n  }\n  .admin__tweets__list__main__wrapper {\n    width: 100%;\n  }\n  .admin__tweets__list__body__wrapper {\n    border-top: 1px solid $light-gray;\n    display: flex;\n    position: relative;\n    padding-top: 10px;\n    .admin__tweets__list__image__wrapper {\n      margin-right: 10px;\n      margin-left: 15px;\n      .admin__tweets__list__image {\n        width: 50px;\n        height: 50px;\n        border-radius: 50%;\n      }\n    }\n  }\n  .admin__tweets__list__name__wrapper {\n    display: flex;\n    margin-bottom: 5px;\n    .admin__tweets__list__name {\n      font-weight: 700;\n      margin-right: 5px;\n    }\n    .admin__tweets__list__account, .admin__tweets__list__time {\n      color: $tx-gray;\n      font-size: 15px;\n    }\n  }\n  .admin__tweets__list__wrapper {\n    line-height: 22px;\n    font-size: 15px;\n    margin-bottom: 2rem;\n    margin-right: 50px;\n    width: 65em;\n    letter-spacing: 2px;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n  .admin__tweets__list__icon {\n    position: absolute;\n    top: 5px;\n    right: 20px;\n    color: $tx-gray;\n    font-size: 1.3rem;\n    border: none;\n    background: none;\n    &:hover {\n      color: $orange;\n    }\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweets.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweets.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminTweets.vue?vue&type=template&id=8032cfc2&scoped=true&\"\nimport script from \"./AdminTweets.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminTweets.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminTweets.vue?vue&type=style&index=0&id=8032cfc2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8032cfc2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}